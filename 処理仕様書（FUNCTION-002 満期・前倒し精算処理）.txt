000000*****************************************************************
000000* 業務仕様説明（FUNCTION-002 満期・前倒し精算処理）
000000*---------------------------------------------------------------*
000000* プログラムID : PGM001
000000* 機能ID       : FUNCTION-002
000000*---------------------------------------------------------------*
000000* プログラム概要
000000*---------------------------------------------------------------*
000000* 本機能は、銀行ABCの預金管理システムにおいて、
000000* 有効な預金契約（DB_ACCOUNT_SAVINGS.STATUS = '1'）を対象に、
000000* 満期到達または前倒し解約を判定し、
000000* 精算処理および DB 更新を行う処理である。
000000*
000000* 本機能においてのみ、
000000* DB 更新および COMMIT 処理を行う。
000000*
000000*---------------------------------------------------------------*
000000* 対象テーブル
000000*---------------------------------------------------------------*
000000* DB_ACCOUNT_SAVINGS
000000*   - ORDER_ID
000000*   - ACC_ID
000000*   - SAVING_TYPE
000000*   - START_DATE
000000*   - END_DATE
000000*   - MONEY_ROOT
000000*   - STATUS
000000*
000000* DB_INTEREST_INFO
000000*   - SAVING_TYPE
000000*   - INTEREST_RATE
000000*
000000* DB_ACCOUNT_BALANCE
000000*   - ACC_ID
000000*   - BALANCE
000000*---------------------------------------------------------------*
000000* 処理フロー概要
000000*---------------------------------------------------------------*
000000* 1. JCL パラメータチェック
000000*   - PARAM = '2' または '3' の場合のみ本機能を実行
000000*
000000* 2. 対象データ取得
000000*   - STATUS = '1' の契約をカーソルで取得
000000*
000000* 3. 日付判定
000000*   - CURRENT-DATE、START_DATE、END_DATE を比較
000000*
000000*---------------------------------------------------------------*
000000* 4. 利息計算（単利）
000000*---------------------------------------------------------------*
000000*
000000* 【非定期預金（NON-TERM）】
000000*   利息 = MONEY_ROOT × 非定期利率 × 経過日数 ÷ 365
000000*
000000* 【定期預金（FIXED-03 / FIXED-06 / FIXED-12）】
000000*
000000*   ■ 満期到達（CURRENT-DATE >= END_DATE）
000000*     FIXED-03 :  90 日
000000*     FIXED-06 : 180 日
000000*     FIXED-12 : 365 日
000000*
000000*     利息 = MONEY_ROOT × 定期利率 × 契約日数 ÷ 365
000000*
000000*   ■ 前倒し解約（CURRENT-DATE < END_DATE）
000000*     利息 = MONEY_ROOT × 非定期利率 × 経過日数 ÷ 365
000000*
000000*---------------------------------------------------------------*
000000* 5. 合計金額算出
000000*---------------------------------------------------------------*
000000*   MONEY = MONEY_ROOT + INTEREST
000000*
000000*---------------------------------------------------------------*
000000* 6. DB 更新処理
000000*---------------------------------------------------------------*
000000*   (1) DB_ACCOUNT_BALANCE
000000*       - BALANCE = BALANCE + MONEY
000000*
000000*   (2) DB_ACCOUNT_SAVINGS
000000*       - STATUS = '9'
000000*
000000*   ※ INTEREST / MONEY カラムは更新しない
000000*
000000*---------------------------------------------------------------*
000000* 7. 正常終了処理
000000*---------------------------------------------------------------*
000000*   - 全件処理完了後、COMMIT を 1 回実行
000000*
000000*---------------------------------------------------------------*
000000* エラー処理
000000*---------------------------------------------------------------*
000000* - SQLCODE < 0 の場合
000000*    ・CST-ABEND-BREAKPOINT に処理名設定
000000*    ・エラーメッセージ出力
000000*    ・ROLLBACK 実行
000000*    ・異常終了（STOP RUN）
000000*
000000*****************************************************************
