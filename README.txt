000000*****************************************************************
000000* 業務仕様説明（詳細版）                                          
000000*---------------------------------------------------------------*
000000* プログラムID : PGM01                                                                               
000000*---------------------------------------------------------------*
000000* プログラム概要                                                   
000000* 本プログラムは、銀行ABCの預金管理システムにおいて、
000000* マルチアカウント・マルチ預金契約に対応した利息計算と精算処理を行う
000000* COBOLプログラムである。 
000000*---------------------------------------------------------------*
000000* 主な処理フロー
000000*---------------------------------------------------------------*
000000* 1. FUNCTION-001 (CALCULATE_INTEREST)
000000*    - DB_ACCOUNT_SAVINGS.STATUS = '1' の有効契約を対象
000000*    - 各契約に対して以下を実行：
000000*        1. 契約種別（NON-TERM / fixed-03 / fixed-06 / fixed-12）
000000*           を判定
000000*        2. DB_INTEREST_INFO から利率を取得
000000*        3. 利息を計算（単利計算）：
000000*           ・非定期（NON-TERM）：
000000*             利息 = 元本 × 利率 × 経過日数 ÷ 365
000000*           ・定期（TERM）：
000000*               - 満期到達時：利息 = 
000000*                 元本 × 利率 × 契約期間日数 ÷ 365
000000*               - 満期未到達時：利息 = 
000000*                 元本 × 非定期利率 × 経過日数 ÷ 365
000000*        4. DB_ACCOUNT_SAVINGS の INTEREST と MONEY 
000000*           (=元本+利息) を更新
000000*    - 注意点：
000000*        ・複数契約をまとめて処理しない（1契約ずつ処理）
000000*        ・利率はDBから取得、ハードコード禁止
000000*---------------------------------------------------------------*
000000* 2. FUNCTION-002 (SETTLEMENT)
000000*    - DB_ACCOUNT_SAVINGS.STATUS = '1' の契約を対象
000000*    - 各契約に対して以下を実行：
000000*        1. 現在日付と契約満期日を比較し、満期到達か前倒しか判定
000000*        2. 前倒しの場合は利息を非定期利率で再計算
000000*        3. DB_ACCOUNT_BALANCE.BALANCE に契約の MONEY を加算
000000*           - 同一口座に複数契約がある場合は順次加算
000000*           - 上書き禁止
000000*        4. DB_ACCOUNT_SAVINGS.STATUS を '9' に更新（完了）
000000*    - 注意点：
000000*        ・各契約ごとに独立して更新
000000*        ・SQLエラー時はログ出力・ROLLBACK・異常終了
000000*---------------------------------------------------------------*
000000* 対象テーブル
000000*---------------------------------------------------------------*
000000* DB_ACCOUNT_SAVINGS : 預金契約情報（普通預金／定期預金）
000000*    - ORDER_ID, 
000000*    - ACC_ID, 
000000*    - SAVING_TYPE, 
000000*    - START_DATE, 
000000*    - END_DATE, 
000000*    - MONEY_ROOT, 
000000*    - INTEREST, 
000000*    - MONEY, 
000000*    - STATUS
000000* DB_INTEREST_INFO   : 預金種別別利率マスタ
000000*    - SAVING_TYPE, INTEREST_RATE
000000* DB_ACCOUNT_BALANCE : 口座残高管理
000000*    - ACC_ID, BALANCE
000000*---------------------------------------------------------------*
000000* 処理フロー概要（ビジネス視点）
000000*---------------------------------------------------------------*
000000* 1. 利息計算（FUNCTION-001）
000000*    - SELECT STATUS='1' の契約
000000*    - FOR EACH 契約：
000000*        ・利率取得
000000*        ・経過日数計算
000000*        ・利息計算
000000*        ・DB_ACCOUNT_SAVINGS 更新
000000* 2. 精算処理（FUNCTION-002）
000000*    - SELECT STATUS='1' の契約
000000*    - FOR EACH 契約：
000000*        ・満期判定
000000*        ・必要に応じ利息再計算
000000*        ・DB_ACCOUNT_BALANCE に加算
000000*        ・DB_ACCOUNT_SAVINGS.STATUS 更新
000000*---------------------------------------------------------------*
000000* エラー処理
000000*---------------------------------------------------------------*
000000* - SQLCODE < 0 の場合：
000000*     ・HV-ABEND-BREAKPOINT にモジュール名格納
000000*     ・ログ出力
000000*     ・ROLLBACK
000000*     ・異常終了（STOP RUN）
000000*---------------------------------------------------------------*
000000* 注意事項
000000*---------------------------------------------------------------*
000000* - 複数契約は個別に処理
000000* - 利率はDBから取得
000000* - Money = Money_Root + Interest
000000* - 前倒し精算は非定期利率を使用
000000*****************************************************************