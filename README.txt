*****************************************************************
* テストケース仕様書（SPD9999SET 決済処理）【SRC準拠版】
*---------------------------------------------------------------*
* UPDATE :
*   2026/01/21 : SRC（COBOL / DB2）定義に基づき作成
*---------------------------------------------------------------*
* プログラムID : SPD9999SET
* 呼出元       : SPD9999DRV
*---------------------------------------------------------------*
* プログラム概要
*---------------------------------------------------------------*
* 本テストケースは、銀行ABCの預金管理システムにおける
* SPD9999SET（預金利息計算・満期決済処理）プログラムが、
* SRC（COBOL / DB2）定義通りに動作することを検証する。
*
* 本プログラムは JCL または 呼出元プログラム（SPD9999DRV）
* から渡される PARM により処理内容を制御する。
*---------------------------------------------------------------*
* 対象処理概要
*---------------------------------------------------------------*
* ・利息計算処理（DB更新なし、表示のみ）
* ・満期決済処理（DB更新あり、COMMIT制御あり）
*
* ※ 処理単位は ACC_ID 単位
* ※ カーソルにより対象レコードを1件ずつ処理する
*---------------------------------------------------------------*
* テスト目的
*---------------------------------------------------------------*
* 1. 利息計算ロジックが SRC 定義通りであること
* 2. 満期判定および決済処理が正しく行われること
* 3. DB更新処理が正しいテーブル・項目に反映されること
* 4. SQLCODE 判定および ABEND 制御が SRC 通りであること
* 5. COMMIT 制御（件数制御・最終COMMIT）が SRC 定義通りであること
*---------------------------------------------------------------*
* 前提条件（SRC準拠）
*---------------------------------------------------------------*
* ・対象テーブル
*   - MYDB.DB_ACCOUNT_SAVINGS
*   - MYDB.DB_ACCOUNT_BALANCE
*   - MYDB.DB_INTEREST_INFO
* ・対象レコード条件
*   - DB_ACCOUNT_SAVINGS.STATUS = '1'
* ・カーソル処理
*   - OPEN → FETCH → 処理 → CLOSE
* ・SQLCODE 判定ルール
*     SQLCODE = 0   ：正常
*     SQLCODE = 100 ：FETCH 終了（正常）
*     SQLCODE < 0   ：異常（ABEND 処理）
*---------------------------------------------------------------*
* パラメータ仕様
*---------------------------------------------------------------*
* PARM = '1'
*   → 利息計算処理（表示のみ）
*      ・DB更新なし
*      ・COMMIT 実施なし
* PARM = '2'
*   → 満期決済処理
*      ・DB_ACCOUNT_BALANCE 更新
*      ・DB_ACCOUNT_SAVINGS.STATUS 更新
*      ・件数制御による COMMIT 実施
* PARM = '3'
*   → 利息計算処理 実行後、満期決済処理を続行
* 上記以外
*   → パラメータエラーとして STOP RUN
*---------------------------------------------------------------*
* COMMIT / ROLLBACK 制御（SRC準拠）
*---------------------------------------------------------------*
* ・COMMIT は満期決済処理（PARM='2','3'）時のみ実施
* ・COMMIT は件数制御（CST-COMMIT-LIMIT）により実施
* ・カーソル CLOSE 後、未COMMIT件数が存在する場合は最終COMMITを実施
* ・SQLエラー発生時は ABEND 処理内で ROLLBACK を実施
*---------------------------------------------------------------*
* 正常系テストケース
*---------------------------------------------------------------*
* ケース1：利息計算処理（PARM='1'）
*---------------------------------------------------------------*
* 期待結果：
*   ・利息計算結果が SYSOUT に出力される
*   ・DB更新なし
*   ・COMMIT / ROLLBACK は実行されない
* ケース2：満期決済処理（PARM='2'）
*---------------------------------------------------------------*
* 期待結果：
*   ・残高が正しく更新される
*   ・預金ステータスが '9'（決済済）に更新される
*   ・件数制御および最終COMMITが正しく実行される
* ケース3：利息計算＋満期決済（PARM='3'）
*---------------------------------------------------------------*
* 期待結果：
*   ・利息計算結果が出力される
*   ・続けて満期決済処理が正常に完了する
*---------------------------------------------------------------*
* 異常系テストケース
*---------------------------------------------------------------*
* ケースA：SQLエラー発生
*---------------------------------------------------------------*
* 期待結果：
*   ・CST-ABEND-BREAKPOINT 設定
*   ・ABEND 処理実行
*   ・ROLLBACK 実施後 STOP RUN
* ケースB：FETCH 終了（SQLCODE=100）
*---------------------------------------------------------------*
* 期待結果：
*   ・正常終了
*   ・不要な COMMIT は実行されない
*---------------------------------------------------------------*
* 備考
*---------------------------------------------------------------*
* ・本仕様書は SRC（COBOL）を正とする
* ・テスト結果は SYSOUT ログおよび DB 内容により確認する
*****************************************************************
